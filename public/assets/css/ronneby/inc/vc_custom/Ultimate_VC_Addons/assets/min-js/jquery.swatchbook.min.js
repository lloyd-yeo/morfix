(function(e,t,n){"use strict";var r=t.bsfmodernizr;jQuery.fn.reverse=[].reverse;e.SwatchBook=function(t,n){this.$el=e(n);this._init(t)};e.SwatchBook.defaults={center:6,angleInc:8,speed:700,easing:"ease",proximity:45,neighbor:4,onLoadAnim:true,initclosed:false,closeIdx:-1,openAt:-1};e.SwatchBook.prototype={_init:function(t){this.options=e.extend(true,{},e.SwatchBook.defaults,t);this.$items=this.$el.children("div");this.itemsCount=this.$items.length;this.current=-1;this.support=r.csstransitions;this.cache=[];if(this.options.onLoadAnim){this._setTransition()}if(!this.options.initclosed){this._center(this.options.center,this.options.onLoadAnim)}else{this.isClosed=true;if(!this.options.onLoadAnim){this._setTransition()}}if(this.options.openAt>=0&&this.options.openAt<this.itemsCount){this._openItem(this.$items.eq(this.options.openAt))}this._initEvents()},_setTransition:function(){if(this.support){this.$items.css({transition:"all "+this.options.speed+"ms "+this.options.easing})}},_openclose:function(){this.isClosed?this._center(this.options.center,true):this.$items.css({transform:"rotate(0deg)"});this.isClosed=!this.isClosed},_center:function(t,n){var r=this;this.$items.each(function(n){var i="rotate("+r.options.angleInc*(n-t)+"deg)";e(this).css({transform:i})})},_openItem:function(e){var t=e.index();if(t!==this.current){if(this.options.closeIdx!==-1&&t===this.options.closeIdx){this._openclose();this._setCurrent()}else{this._setCurrent(e);e.css({transform:"rotate(0deg)"});this._rotateSiblings(e)}}},_initEvents:function(){var t=this;this.$items.on("click.swatchbook",function(n){t._openItem(e(this))})},_rotateSiblings:function(t){var n=this,r=t.index(),i=this.cache[r],s;if(i){s=i}else{s=t.siblings();this.cache[r]=s}s.each(function(t){var i=t<r?n.options.angleInc*(t-r):t-r===1?n.options.proximity:n.options.proximity+(t-r-1)*n.options.neighbor;var s="rotate("+i+"deg)";e(this).css({transform:s})})},_setCurrent:function(e){this.current=e?e.index():-1;this.$items.removeClass("ff-active");if(e){e.addClass("ff-active")}}};var i=function(e){if(t.console){t.console.error(e)}};e.fn.swatchbook=function(t){var n=e.data(this,"swatchbook");if(typeof t==="string"){var r=Array.prototype.slice.call(arguments,1);this.each(function(){if(!n){i("cannot call methods on swatchbook prior to initialization; "+"attempted to call method '"+t+"'");return}if(!e.isFunction(n[t])||t.charAt(0)==="_"){i("no such method '"+t+"' for swatchbook instance");return}n[t].apply(n,r)})}else{this.each(function(){if(n){n._init()}else{n=e.data(this,"swatchbook",new e.SwatchBook(t,this))}})}return n}})(jQuery,window)